{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import times from'lodash/times';import React,{Component}from'react';import PropTypes from'prop-types';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Animated from\"react-native-web/dist/exports/Animated\";import PanResponder from\"react-native-web/dist/exports/PanResponder\";import Image from\"react-native-web/dist/exports/Image\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Platform from\"react-native-web/dist/exports/Platform\";import ViewPropTypes from\"react-native-web/dist/exports/ViewPropTypes\";var STAR_IMAGE=require(\"./images/star.png\");var HEART_IMAGE=require(\"./images/heart.png\");var ROCKET_IMAGE=require(\"./images/rocket.png\");var BELL_IMAGE=require(\"./images/bell.png\");var TYPES={star:{source:STAR_IMAGE,color:'#f1c40f',backgroundColor:'white'},heart:{source:HEART_IMAGE,color:'#e74c3c',backgroundColor:'white'},rocket:{source:ROCKET_IMAGE,color:'#2ecc71',backgroundColor:'white'},bell:{source:BELL_IMAGE,color:'#f39c12',backgroundColor:'white'}};var SwipeRating=function(_Component){_inherits(SwipeRating,_Component);function SwipeRating(props){var _this;_classCallCheck(this,SwipeRating);_this=_possibleConstructorReturn(this,_getPrototypeOf(SwipeRating).call(this,props));var _this$props=_this.props,onStartRating=_this$props.onStartRating,onFinishRating=_this$props.onFinishRating,fractions=_this$props.fractions;var position=new Animated.ValueXY();var panResponder=PanResponder.create({onStartShouldSetPanResponder:function onStartShouldSetPanResponder(){return true;},onPanResponderGrant:function onPanResponderGrant(){if(typeof onStartRating==='function'){onStartRating();}},onPanResponderMove:function onPanResponderMove(event,gesture){var newPosition=new Animated.ValueXY();newPosition.setValue({x:gesture.dx,y:0});_this.setState({position:newPosition,value:gesture.dx});},onPanResponderRelease:function onPanResponderRelease(event){var rating=_this.getCurrentRating(_this.state.value);if(rating>=_this.props.minValue){if(!fractions){_this.setCurrentRating(rating);}onFinishRating(rating);}}});_this.state={panResponder:panResponder,position:position,display:false};return _this;}_createClass(SwipeRating,[{key:\"componentDidMount\",value:function componentDidMount(){var _STAR_IMAGE,_HEART_IMAGE,_ROCKET_IMAGE,_BELL_IMAGE;return _regeneratorRuntime.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(require(\"./images/star.png\"));case 3:_STAR_IMAGE=_context.sent;_context.next=6;return _regeneratorRuntime.awrap(require(\"./images/heart.png\"));case 6:_HEART_IMAGE=_context.sent;_context.next=9;return _regeneratorRuntime.awrap(require(\"./images/rocket.png\"));case 9:_ROCKET_IMAGE=_context.sent;_context.next=12;return _regeneratorRuntime.awrap(require(\"./images/bell.png\"));case 12:_BELL_IMAGE=_context.sent;this.setState({display:true});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 19:this.setCurrentRating(this.props.startingValue);case 20:case\"end\":return _context.stop();}}},null,this,[[0,16]]);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.startingValue!==prevProps.startingValue){this.setCurrentRating(this.props.startingValue);}}},{key:\"getPrimaryViewStyle\",value:function getPrimaryViewStyle(){var position=this.state.position;var _this$props2=this.props,imageSize=_this$props2.imageSize,ratingCount=_this$props2.ratingCount,type=_this$props2.type;var color=TYPES[type].color;var width=position.x.interpolate({inputRange:[-ratingCount*(imageSize/2),0,ratingCount*(imageSize/2)],outputRange:[0,ratingCount*imageSize/2,ratingCount*imageSize],extrapolate:'clamp'},{useNativeDriver:true});return{backgroundColor:color,width:width,height:width?imageSize:0};}},{key:\"getSecondaryViewStyle\",value:function getSecondaryViewStyle(){var position=this.state.position;var _this$props3=this.props,imageSize=_this$props3.imageSize,ratingCount=_this$props3.ratingCount,type=_this$props3.type;var backgroundColor=TYPES[type].backgroundColor;var width=position.x.interpolate({inputRange:[-ratingCount*(imageSize/2),0,ratingCount*(imageSize/2)],outputRange:[ratingCount*imageSize,ratingCount*imageSize/2,0],extrapolate:'clamp'},{useNativeDriver:true});return{backgroundColor:backgroundColor,width:width,height:width?imageSize:0};}},{key:\"renderRatings\",value:function renderRatings(){var _this$props4=this.props,imageSize=_this$props4.imageSize,ratingCount=_this$props4.ratingCount,type=_this$props4.type,tintColor=_this$props4.tintColor;var source=TYPES[type].source;return times(ratingCount,function(index){return React.createElement(View,{key:index,style:styles.starContainer},React.createElement(Image,{source:source,style:{width:imageSize,height:imageSize,tintColor:tintColor}}));});}},{key:\"getCurrentRating\",value:function getCurrentRating(value){var _this$props5=this.props,fractions=_this$props5.fractions,imageSize=_this$props5.imageSize,ratingCount=_this$props5.ratingCount;var startingValue=ratingCount/2;var currentRating=this.props.minValue?this.props.minValue:0;if(value>ratingCount*imageSize/2){currentRating=ratingCount;}else if(value<-ratingCount*imageSize/2){currentRating=this.props.minValue?this.props.minValue:0;}else if(value<=imageSize||value>imageSize){currentRating=startingValue+value/imageSize;currentRating=!fractions?Math.ceil(currentRating):+currentRating.toFixed(fractions);}else{currentRating=!fractions?Math.ceil(startingValue):+startingValue.toFixed(fractions);}return currentRating;}},{key:\"setCurrentRating\",value:function setCurrentRating(rating){var _this$props6=this.props,imageSize=_this$props6.imageSize,ratingCount=_this$props6.ratingCount;var initialRating=ratingCount/2;var value=null;if(rating>ratingCount){value=ratingCount*imageSize/2;}else if(rating<0){value=-ratingCount*imageSize/2;}else if(rating<ratingCount/2||rating>ratingCount/2){value=(rating-initialRating)*imageSize;}else{value=0;}var newPosition=new Animated.ValueXY();newPosition.setValue({x:value,y:0});this.setState({position:newPosition,value:value});}},{key:\"displayCurrentRating\",value:function displayCurrentRating(){var _this$props7=this.props,ratingCount=_this$props7.ratingCount,type=_this$props7.type,readonly=_this$props7.readonly,ratingTextColor=_this$props7.ratingTextColor;var color=ratingTextColor||TYPES[type].color;return React.createElement(View,{style:styles.showRatingView},React.createElement(View,{style:styles.ratingView},React.createElement(Text,{style:[styles.ratingText,{color:color}]},\"Rating:\",' '),React.createElement(Text,{style:[styles.currentRatingText,{color:color}]},this.getCurrentRating(this.state.value)),React.createElement(Text,{style:[styles.maxRatingText,{color:color}]},\"/\",ratingCount)),React.createElement(View,null,readonly&&React.createElement(Text,{style:[styles.readonlyLabel,{color:color}]},\"(readonly)\")));}},{key:\"render\",value:function render(){var _this$props8=this.props,readonly=_this$props8.readonly,type=_this$props8.type,ratingImage=_this$props8.ratingImage,ratingColor=_this$props8.ratingColor,ratingBackgroundColor=_this$props8.ratingBackgroundColor,style=_this$props8.style,showRating=_this$props8.showRating;if(type==='custom'){var custom={source:ratingImage,color:ratingColor,backgroundColor:ratingBackgroundColor};TYPES.custom=custom;}return this.state.display?React.createElement(View,{pointerEvents:readonly?'none':'auto',style:style},showRating&&this.displayCurrentRating(),React.createElement(View,_extends({style:styles.starsWrapper},this.state.panResponder.panHandlers),React.createElement(View,{style:styles.starsInsideWrapper},React.createElement(Animated.View,{style:this.getPrimaryViewStyle()}),React.createElement(Animated.View,{style:this.getSecondaryViewStyle()})),this.renderRatings())):null;}}]);return SwipeRating;}(Component);SwipeRating.defaultProps={type:'star',ratingImage:require(\"./images/star.png\"),ratingColor:'#f1c40f',ratingBackgroundColor:'white',ratingCount:5,imageSize:40,onFinishRating:function onFinishRating(){return console.log('Attach a onFinishRating function here.');},minValue:0};export{SwipeRating as default};var styles=StyleSheet.create({starsWrapper:{flexDirection:'row',justifyContent:'center',alignItems:'center'},starsInsideWrapper:{position:'absolute',top:0,left:0,right:0,bottom:0,flexDirection:'row',justifyContent:'center',alignItems:'center'},showRatingView:{flexDirection:'column',justifyContent:'center',alignItems:'center',paddingBottom:5},ratingView:{flexDirection:'row',justifyContent:'center',alignItems:'center',paddingBottom:5},ratingText:{fontSize:15,textAlign:'center',fontFamily:Platform.OS==='ios'?'Trebuchet MS':null,color:'#34495e'},readonlyLabel:{justifyContent:'center',alignItems:'center',fontSize:12,textAlign:'center',fontFamily:Platform.OS==='ios'?'Trebuchet MS':null,color:'#34495a'},currentRatingText:{fontSize:30,textAlign:'center',fontFamily:Platform.OS==='ios'?'Trebuchet MS':null},maxRatingText:{fontSize:18,textAlign:'center',fontFamily:Platform.OS==='ios'?'Trebuchet MS':null,color:'#34495e'}});var fractionsType=function fractionsType(props,propName,componentName){if(props[propName]){var value=props[propName];if(typeof value==='number'){return value>=0&&value<=20?null:new Error(\"`\"+propName+\"` in `\"+componentName+\"` must be between 0 and 20\");}return new Error(\"`\"+propName+\"` in `\"+componentName+\"` must be a number\");}};SwipeRating.propTypes={type:PropTypes.string,ratingImage:Image.propTypes.source,ratingColor:PropTypes.string,ratingBackgroundColor:PropTypes.string,ratingCount:PropTypes.number,ratingTextColor:PropTypes.string,imageSize:PropTypes.number,onStartRating:PropTypes.func,onFinishRating:PropTypes.func,showRating:PropTypes.bool,style:ViewPropTypes.style,readonly:PropTypes.bool,startingValue:PropTypes.number,fractions:fractionsType,minValue:PropTypes.number};","map":{"version":3,"sources":["C:/Users/karth/Documents/RoboticsScoutingTool/node_modules/react-native-ratings/src/SwipeRating.js"],"names":["times","React","Component","PropTypes","STAR_IMAGE","require","HEART_IMAGE","ROCKET_IMAGE","BELL_IMAGE","TYPES","star","source","color","backgroundColor","heart","rocket","bell","SwipeRating","props","onStartRating","onFinishRating","fractions","position","Animated","ValueXY","panResponder","PanResponder","create","onStartShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","event","gesture","newPosition","setValue","x","dx","y","setState","value","onPanResponderRelease","rating","getCurrentRating","state","minValue","setCurrentRating","display","console","log","startingValue","prevProps","imageSize","ratingCount","type","width","interpolate","inputRange","outputRange","extrapolate","useNativeDriver","height","tintColor","index","styles","starContainer","currentRating","Math","ceil","toFixed","initialRating","readonly","ratingTextColor","showRatingView","ratingView","ratingText","currentRatingText","maxRatingText","readonlyLabel","ratingImage","ratingColor","ratingBackgroundColor","style","showRating","custom","displayCurrentRating","starsWrapper","panHandlers","starsInsideWrapper","getPrimaryViewStyle","getSecondaryViewStyle","renderRatings","defaultProps","StyleSheet","flexDirection","justifyContent","alignItems","top","left","right","bottom","paddingBottom","fontSize","textAlign","fontFamily","Platform","OS","fractionsType","propName","componentName","Error","propTypes","string","Image","number","func","bool","ViewPropTypes"],"mappings":"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","sourcesContent":["import times from 'lodash/times';\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { \n  View, Text, Animated, PanResponder, Image, \n  StyleSheet, Platform, ViewPropTypes\n} from 'react-native';\n\n// RATING IMAGES WITH STATIC BACKGROUND COLOR (white)\nconst STAR_IMAGE = require('./images/star.png');\nconst HEART_IMAGE = require('./images/heart.png');\nconst ROCKET_IMAGE = require('./images/rocket.png');\nconst BELL_IMAGE = require('./images/bell.png');\n\nconst TYPES = {\n  star: {\n    source: STAR_IMAGE,\n    color: '#f1c40f',\n    backgroundColor: 'white'\n  },\n  heart: {\n    source: HEART_IMAGE,\n    color: '#e74c3c',\n    backgroundColor: 'white'\n  },\n  rocket: {\n    source: ROCKET_IMAGE,\n    color: '#2ecc71',\n    backgroundColor: 'white'\n  },\n  bell: {\n    source: BELL_IMAGE,\n    color: '#f39c12',\n    backgroundColor: 'white'\n  }\n};\n\nexport default class SwipeRating extends Component {\n  static defaultProps = {\n    type: 'star',\n    ratingImage: require('./images/star.png'),\n    ratingColor: '#f1c40f',\n    ratingBackgroundColor: 'white',\n    ratingCount: 5,\n    imageSize: 40,\n    onFinishRating: () => console.log('Attach a onFinishRating function here.'),\n    minValue: 0\n  };\n\n  constructor(props) {\n    super(props);\n    const { onStartRating, onFinishRating, fractions } = this.props;\n    const position = new Animated.ValueXY();\n\n    const panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onPanResponderGrant: () => {\n        if (typeof onStartRating === 'function') {\n          onStartRating();\n        }\n      },\n      onPanResponderMove: (event, gesture) => {\n        const newPosition = new Animated.ValueXY();\n        newPosition.setValue({ x: gesture.dx, y: 0 });\n        this.setState({ position: newPosition, value: gesture.dx });\n      },\n      onPanResponderRelease: event => {\n        const rating = this.getCurrentRating(this.state.value);\n        if (rating >= this.props.minValue) {\n          if (!fractions) {\n            // 'round up' to the nearest rating image\n            this.setCurrentRating(rating);\n          }\n          onFinishRating(rating);\n        }\n      }\n    });\n\n    this.state = { panResponder, position, display: false };\n  }\n\n  async componentDidMount() {\n    try {\n      const STAR_IMAGE = await require('./images/star.png');\n      const HEART_IMAGE = await require('./images/heart.png');\n      const ROCKET_IMAGE = await require('./images/rocket.png');\n      const BELL_IMAGE = await require('./images/bell.png');\n\n      this.setState({ display: true })\n    } catch(err) {\n      console.log(err)\n    }\n\n    this.setCurrentRating(this.props.startingValue);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.startingValue !== prevProps.startingValue) {\n      this.setCurrentRating(this.props.startingValue);\n    }\n  }\n\n  getPrimaryViewStyle() {\n    const { position } = this.state;\n    const { imageSize, ratingCount, type } = this.props;\n\n    const color = TYPES[type].color;\n\n    const width = position.x.interpolate(\n      {\n        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],\n        outputRange: [0, (ratingCount * imageSize) / 2, ratingCount * imageSize],\n        extrapolate: 'clamp'\n      },\n      {\n        useNativeDriver: true\n      }\n    );\n\n    return {\n      backgroundColor: color,\n      width,\n      height: width ? imageSize : 0\n    };\n  }\n\n  getSecondaryViewStyle() {\n    const { position } = this.state;\n    const { imageSize, ratingCount, type } = this.props;\n\n    const backgroundColor = TYPES[type].backgroundColor;\n\n    const width = position.x.interpolate(\n      {\n        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],\n        outputRange: [ratingCount * imageSize, (ratingCount * imageSize) / 2, 0],\n        extrapolate: 'clamp'\n      },\n      {\n        useNativeDriver: true\n      }\n    );\n\n    return {\n      backgroundColor,\n      width,\n      height: width ? imageSize : 0\n    };\n  }\n\n  renderRatings() {\n    const { imageSize, ratingCount, type, tintColor } = this.props;\n    const source = TYPES[type].source;\n\n    return times(ratingCount, index => (\n      <View key={index} style={styles.starContainer}>\n        <Image source={source} style={{ width: imageSize, height: imageSize, tintColor }} />\n      </View>\n    ));\n  }\n\n  getCurrentRating(value) {\n    // const { value } = this.state;\n    const { fractions, imageSize, ratingCount } = this.props;\n\n    const startingValue = ratingCount / 2;\n    let currentRating = (this.props.minValue) ? this.props.minValue : 0;\n\n    if (value > (ratingCount * imageSize) / 2) {\n      currentRating = ratingCount;\n    } else if (value < (-ratingCount * imageSize) / 2) {\n      currentRating = (this.props.minValue) ? this.props.minValue : 0;\n    } else if (value <= imageSize || value > imageSize) {\n      currentRating = startingValue + value / imageSize;\n      currentRating = !fractions ? Math.ceil(currentRating) : +currentRating.toFixed(fractions);\n    } else {\n      currentRating = !fractions ? Math.ceil(startingValue) : +startingValue.toFixed(fractions);\n    }\n\n    return currentRating;\n  }\n\n  setCurrentRating(rating) {\n    const { imageSize, ratingCount } = this.props;\n\n    // `initialRating` corresponds to `startingValue` in the getter. Naming it\n    // differently here avoids confusion with `value` below.\n    const initialRating = ratingCount / 2;\n    let value = null;\n\n    if (rating > ratingCount) {\n      value = (ratingCount * imageSize) / 2;\n    } else if (rating < 0) {\n      value = (-ratingCount * imageSize) / 2;\n    } else if (rating < ratingCount / 2 || rating > ratingCount / 2) {\n      value = (rating - initialRating) * imageSize;\n    } else {\n      value = 0;\n    }\n\n    const newPosition = new Animated.ValueXY();\n    newPosition.setValue({ x: value, y: 0 });\n    this.setState({ position: newPosition, value });\n  }\n\n  displayCurrentRating() {\n    const { ratingCount, type, readonly, ratingTextColor } = this.props;\n    const color = ratingTextColor || TYPES[type].color;\n\n    return (\n      <View style={styles.showRatingView}>\n        <View style={styles.ratingView}>\n          <Text style={[styles.ratingText, { color }]}>Rating:{' '}</Text>\n          <Text style={[styles.currentRatingText, { color }]}>{this.getCurrentRating(this.state.value)}</Text>\n          <Text style={[styles.maxRatingText, { color }]}>/{ratingCount}</Text>\n        </View>\n        <View>{readonly && <Text style={[styles.readonlyLabel, { color }]}>(readonly)</Text>}</View>\n      </View>\n    );\n  }\n\n  render() {\n    const { readonly, type, ratingImage, ratingColor, ratingBackgroundColor, style, showRating } = this.props;\n\n    if (type === 'custom') {\n      let custom = {\n        source: ratingImage,\n        color: ratingColor,\n        backgroundColor: ratingBackgroundColor\n      };\n      TYPES.custom = custom;\n    }\n\n    return (\n      this.state.display ?\n      <View pointerEvents={readonly ? 'none' : 'auto'} style={style}>\n        {showRating && this.displayCurrentRating()}\n        <View style={styles.starsWrapper} {...this.state.panResponder.panHandlers}>\n          <View style={styles.starsInsideWrapper}>\n            <Animated.View style={this.getPrimaryViewStyle()} />\n            <Animated.View style={this.getSecondaryViewStyle()} />\n          </View>\n          {this.renderRatings()}\n        </View>\n      </View> :\n      null\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  starsWrapper: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  starsInsideWrapper: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  showRatingView: {\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingBottom: 5\n  },\n  ratingView: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingBottom: 5\n  },\n  ratingText: {\n    fontSize: 15,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495e'\n  },\n  readonlyLabel: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: 12,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495a'\n  },\n  currentRatingText: {\n    fontSize: 30,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null\n  },\n  maxRatingText: {\n    fontSize: 18,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495e'\n  }\n});\n\nconst fractionsType = (props, propName, componentName) => {\n  if (props[propName]) {\n    const value = props[propName];\n    if (typeof value === 'number') {\n      return value >= 0 && value <= 20\n        ? null\n        : new Error(`\\`${propName}\\` in \\`${componentName}\\` must be between 0 and 20`);\n    }\n\n    return new Error(`\\`${propName}\\` in \\`${componentName}\\` must be a number`);\n  }\n};\n\nSwipeRating.propTypes = {\n  type: PropTypes.string,\n  ratingImage: Image.propTypes.source,\n  ratingColor: PropTypes.string,\n  ratingBackgroundColor: PropTypes.string,\n  ratingCount: PropTypes.number,\n  ratingTextColor: PropTypes.string,\n  imageSize: PropTypes.number,\n  onStartRating: PropTypes.func,\n  onFinishRating: PropTypes.func,\n  showRating: PropTypes.bool,\n  style: ViewPropTypes.style,\n  readonly: PropTypes.bool,\n  startingValue: PropTypes.number,\n  fractions: fractionsType,\n  minValue: PropTypes.number\n};\n"]},"metadata":{},"sourceType":"module"}