{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";var _stateToPropMappings;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import findNodeHandleRN from\"react-native-web/dist/exports/findNodeHandle\";import NativeModules from\"react-native-web/dist/exports/NativeModules\";import Touchable from\"react-native-web/dist/exports/Touchable\";import Platform from\"react-native-web/dist/exports/Platform\";import deepEqual from'fbjs/lib/areEqual';import RNGestureHandlerModule from\"./RNGestureHandlerModule\";import State from\"./State\";function findNodeHandle(node){if(Platform.OS==='web')return node;return findNodeHandleRN(node);}var _NativeModules$UIMana=NativeModules.UIManager,UIManager=_NativeModules$UIMana===void 0?{}:_NativeModules$UIMana;var customGHEventsConfig={onGestureHandlerEvent:{registrationName:'onGestureHandlerEvent'},onGestureHandlerStateChange:{registrationName:'onGestureHandlerStateChange'}};UIManager.genericDirectEventTypes=_objectSpread({},UIManager.genericDirectEventTypes,{},customGHEventsConfig);if(UIManager.getConstants){UIManager.getConstants().genericDirectEventTypes=_objectSpread({},UIManager.getConstants().genericDirectEventTypes,{},customGHEventsConfig);}var _UIManager$setJSRespo=UIManager.setJSResponder,oldSetJSResponder=_UIManager$setJSRespo===void 0?function(){}:_UIManager$setJSRespo,_UIManager$clearJSRes=UIManager.clearJSResponder,oldClearJSResponder=_UIManager$clearJSRes===void 0?function(){}:_UIManager$clearJSRes;UIManager.setJSResponder=function(tag,blockNativeResponder){RNGestureHandlerModule.handleSetJSResponder(tag,blockNativeResponder);oldSetJSResponder(tag,blockNativeResponder);};UIManager.clearJSResponder=function(){RNGestureHandlerModule.handleClearJSResponder();oldClearJSResponder();};var handlerTag=1;var handlerIDToTag={};function isConfigParam(param,name){return param!==undefined&&(param!==Object(param)||!('__isNative'in param))&&name!=='onHandlerStateChange'&&name!=='onGestureEvent';}function filterConfig(props,validProps){var defaults=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var res=_objectSpread({},defaults);Object.keys(validProps).forEach(function(key){var value=props[key];if(isConfigParam(value,key)){var _value=props[key];if(key==='simultaneousHandlers'||key==='waitFor'){_value=transformIntoHandlerTags(props[key]);}else if(key==='hitSlop'){if(typeof _value!=='object'){_value={top:_value,left:_value,bottom:_value,right:_value};}}res[key]=_value;}});return res;}function transformIntoHandlerTags(handlerIDs){if(!Array.isArray(handlerIDs)){handlerIDs=[handlerIDs];}if(Platform.OS==='web'){return handlerIDs.map(function(_ref){var current=_ref.current;return current;}).filter(function(handle){return handle;});}return handlerIDs.map(function(handlerID){return handlerIDToTag[handlerID]||handlerID.current&&handlerID.current._handlerTag||-1;}).filter(function(handlerTag){return handlerTag>0;});}function hasUnresolvedRefs(props){var extract=function extract(refs){if(!Array.isArray(refs)){return refs&&refs.current===null;}return refs.some(function(r){return r&&r.current===null;});};return extract(props['simultaneousHandlers'])||extract(props['waitFor']);}var stateToPropMappings=(_stateToPropMappings={},_defineProperty(_stateToPropMappings,State.BEGAN,'onBegan'),_defineProperty(_stateToPropMappings,State.FAILED,'onFailed'),_defineProperty(_stateToPropMappings,State.CANCELLED,'onCancelled'),_defineProperty(_stateToPropMappings,State.ACTIVE,'onActivated'),_defineProperty(_stateToPropMappings,State.END,'onEnded'),_stateToPropMappings);export default function createHandler(handlerName){var propTypes=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var transformProps=arguments.length>3?arguments[3]:undefined;var customNativeProps=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};var Handler=function(_React$Component){_inherits(Handler,_React$Component);function Handler(props){var _this;_classCallCheck(this,Handler);_this=_possibleConstructorReturn(this,_getPrototypeOf(Handler).call(this,props));_this._onGestureHandlerEvent=function(event){if(event.nativeEvent.handlerTag===_this._handlerTag){_this.props.onGestureEvent&&_this.props.onGestureEvent(event);}else{_this.props.onGestureHandlerEvent&&_this.props.onGestureHandlerEvent(event);}};_this._onGestureHandlerStateChange=function(event){if(event.nativeEvent.handlerTag===_this._handlerTag){_this.props.onHandlerStateChange&&_this.props.onHandlerStateChange(event);var stateEventName=stateToPropMappings[event.nativeEvent.state];if(typeof _this.props[stateEventName]==='function'){_this.props[stateEventName](event);}}else{_this.props.onGestureHandlerStateChange&&_this.props.onGestureHandlerStateChange(event);}};_this._refHandler=function(node){_this._viewNode=node;var child=React.Children.only(_this.props.children);var ref=child.ref;if(ref!==null){if(typeof ref==='function'){ref(node);}else{ref.current=node;}}};_this._createGestureHandler=function(newConfig){_this._config=newConfig;RNGestureHandlerModule.createGestureHandler(handlerName,_this._handlerTag,newConfig);};_this._attachGestureHandler=function(newViewTag){_this._viewTag=newViewTag;RNGestureHandlerModule.attachGestureHandler(_this._handlerTag,newViewTag);};_this._updateGestureHandler=function(newConfig){_this._config=newConfig;RNGestureHandlerModule.updateGestureHandler(_this._handlerTag,newConfig);};_this._handlerTag=handlerTag++;_this._config={};if(props.id){if(handlerIDToTag[props.id]!==undefined){throw new Error(\"Handler with ID \\\"\"+props.id+\"\\\" already registered\");}handlerIDToTag[props.id]=_this._handlerTag;}return _this;}_createClass(Handler,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){RNGestureHandlerModule.dropGestureHandler(this._handlerTag);if(this._updateEnqueued){clearImmediate(this._updateEnqueued);}if(this.props.id){delete handlerIDToTag[this.props.id];}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(hasUnresolvedRefs(this.props)){this._updateEnqueued=setImmediate(function(){_this2._updateEnqueued=null;_this2._update();});}this._createGestureHandler(filterConfig(transformProps?transformProps(this.props):this.props,_objectSpread({},this.constructor.propTypes,{},customNativeProps),config));this._attachGestureHandler(findNodeHandle(this._viewNode));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var viewTag=findNodeHandle(this._viewNode);if(this._viewTag!==viewTag){this._attachGestureHandler(viewTag);}this._update();}},{key:\"_update\",value:function _update(){var newConfig=filterConfig(transformProps?transformProps(this.props):this.props,_objectSpread({},this.constructor.propTypes,{},customNativeProps),config);if(!deepEqual(this._config,newConfig)){this._updateGestureHandler(newConfig);}}},{key:\"setNativeProps\",value:function setNativeProps(updates){var mergedProps=_objectSpread({},this.props,{},updates);var newConfig=filterConfig(transformProps?transformProps(mergedProps):mergedProps,_objectSpread({},this.constructor.propTypes,{},customNativeProps),config);this._updateGestureHandler(newConfig);}},{key:\"render\",value:function render(){var gestureEventHandler=this._onGestureHandlerEvent;var _this$props=this.props,onGestureEvent=_this$props.onGestureEvent,onGestureHandlerEvent=_this$props.onGestureHandlerEvent;if(onGestureEvent&&typeof onGestureEvent!=='function'){if(onGestureHandlerEvent){throw new Error('Nesting touch handlers with native animated driver is not supported yet');}gestureEventHandler=this.props.onGestureEvent;}else{if(onGestureHandlerEvent&&typeof onGestureHandlerEvent!=='function'){throw new Error('Nesting touch handlers with native animated driver is not supported yet');}}var gestureStateEventHandler=this._onGestureHandlerStateChange;var _this$props2=this.props,onHandlerStateChange=_this$props2.onHandlerStateChange,onGestureHandlerStateChange=_this$props2.onGestureHandlerStateChange;if(onHandlerStateChange&&typeof onHandlerStateChange!=='function'){if(onGestureHandlerStateChange){throw new Error('Nesting touch handlers with native animated driver is not supported yet');}gestureStateEventHandler=this.props.onHandlerStateChange;}else{if(onGestureHandlerStateChange&&typeof onGestureHandlerStateChange!=='function'){throw new Error('Nesting touch handlers with native animated driver is not supported yet');}}var child=React.Children.only(this.props.children);var grandChildren=child.props.children;if(Touchable.TOUCH_TARGET_DEBUG&&child.type&&(child.type==='RNGestureHandlerButton'||child.type.name==='View'||child.type.displayName==='View')){grandChildren=React.Children.toArray(grandChildren);grandChildren.push(Touchable.renderDebugView({color:'mediumspringgreen',hitSlop:child.props.hitSlop}));}return React.cloneElement(child,{ref:this._refHandler,collapsable:false,onGestureHandlerEvent:gestureEventHandler,onGestureHandlerStateChange:gestureStateEventHandler},grandChildren);}}]);return Handler;}(React.Component);Handler.displayName=handlerName;Handler.propTypes=propTypes;return Handler;}","map":{"version":3,"sources":["C:/Users/karth/Documents/RoboticsScoutingTool/node_modules/react-native-gesture-handler/createHandler.js"],"names":["React","deepEqual","RNGestureHandlerModule","State","findNodeHandle","node","Platform","OS","findNodeHandleRN","NativeModules","UIManager","customGHEventsConfig","onGestureHandlerEvent","registrationName","onGestureHandlerStateChange","genericDirectEventTypes","getConstants","setJSResponder","oldSetJSResponder","clearJSResponder","oldClearJSResponder","tag","blockNativeResponder","handleSetJSResponder","handleClearJSResponder","handlerTag","handlerIDToTag","isConfigParam","param","name","undefined","Object","filterConfig","props","validProps","defaults","res","keys","forEach","key","value","transformIntoHandlerTags","top","left","bottom","right","handlerIDs","Array","isArray","map","current","filter","handle","handlerID","_handlerTag","hasUnresolvedRefs","extract","refs","some","r","stateToPropMappings","BEGAN","FAILED","CANCELLED","ACTIVE","END","createHandler","handlerName","propTypes","config","transformProps","customNativeProps","Handler","_onGestureHandlerEvent","event","nativeEvent","onGestureEvent","_onGestureHandlerStateChange","onHandlerStateChange","stateEventName","state","_refHandler","_viewNode","child","Children","only","children","ref","_createGestureHandler","newConfig","_config","createGestureHandler","_attachGestureHandler","newViewTag","_viewTag","attachGestureHandler","_updateGestureHandler","updateGestureHandler","id","Error","dropGestureHandler","_updateEnqueued","clearImmediate","setImmediate","_update","constructor","viewTag","updates","mergedProps","gestureEventHandler","gestureStateEventHandler","grandChildren","Touchable","TOUCH_TARGET_DEBUG","type","displayName","toArray","push","renderDebugView","color","hitSlop","cloneElement","collapsable","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  findNodeHandle as findNodeHandleRN,\n  NativeModules,\n  Touchable,\n  Platform,\n} from 'react-native';\nimport deepEqual from 'fbjs/lib/areEqual';\nimport RNGestureHandlerModule from './RNGestureHandlerModule';\nimport State from './State';\n\nfunction findNodeHandle(node) {\n  if (Platform.OS === 'web') return node;\n  return findNodeHandleRN(node);\n}\n\nconst { UIManager = {} } = NativeModules;\n\nconst customGHEventsConfig = {\n  onGestureHandlerEvent: { registrationName: 'onGestureHandlerEvent' },\n  onGestureHandlerStateChange: {\n    registrationName: 'onGestureHandlerStateChange',\n  },\n};\n\n// Add gesture specific events to genericDirectEventTypes object exported from UIManager\n// native module.\n// Once new event types are registered with react it is possible to dispatch these\n// events to all kind of native views.\nUIManager.genericDirectEventTypes = {\n  ...UIManager.genericDirectEventTypes,\n  ...customGHEventsConfig,\n};\n// In newer versions of RN the `genericDirectEventTypes` is located in the object\n// returned by UIManager.getConstants(), we need to add it there as well to make\n// it compatible with RN 61+\nif (UIManager.getConstants) {\n  UIManager.getConstants().genericDirectEventTypes = {\n    ...UIManager.getConstants().genericDirectEventTypes,\n    ...customGHEventsConfig,\n  };\n}\n\n// Wrap JS responder calls and notify gesture handler manager\nconst {\n  setJSResponder: oldSetJSResponder = () => {},\n  clearJSResponder: oldClearJSResponder = () => {},\n} = UIManager;\nUIManager.setJSResponder = (tag, blockNativeResponder) => {\n  RNGestureHandlerModule.handleSetJSResponder(tag, blockNativeResponder);\n  oldSetJSResponder(tag, blockNativeResponder);\n};\nUIManager.clearJSResponder = () => {\n  RNGestureHandlerModule.handleClearJSResponder();\n  oldClearJSResponder();\n};\n\nlet handlerTag = 1;\nconst handlerIDToTag = {};\n\nfunction isConfigParam(param, name) {\n  // param !== Object(param) returns false if `param` is a function\n  // or an object and returns true if `param` is null\n  return (\n    param !== undefined &&\n    (param !== Object(param) || !('__isNative' in param)) &&\n    name !== 'onHandlerStateChange' &&\n    name !== 'onGestureEvent'\n  );\n}\n\nfunction filterConfig(props, validProps, defaults = {}) {\n  const res = { ...defaults };\n  Object.keys(validProps).forEach(key => {\n    const value = props[key];\n    if (isConfigParam(value, key)) {\n      let value = props[key];\n      if (key === 'simultaneousHandlers' || key === 'waitFor') {\n        value = transformIntoHandlerTags(props[key]);\n      } else if (key === 'hitSlop') {\n        if (typeof value !== 'object') {\n          value = { top: value, left: value, bottom: value, right: value };\n        }\n      }\n      res[key] = value;\n    }\n  });\n  return res;\n}\n\nfunction transformIntoHandlerTags(handlerIDs) {\n  if (!Array.isArray(handlerIDs)) {\n    handlerIDs = [handlerIDs];\n  }\n\n  if (Platform.OS === 'web') {\n    return handlerIDs.map(({ current }) => current).filter(handle => handle);\n  }\n  // converts handler string IDs into their numeric tags\n  return handlerIDs\n    .map(\n      handlerID =>\n        handlerIDToTag[handlerID] ||\n        (handlerID.current && handlerID.current._handlerTag) ||\n        -1\n    )\n    .filter(handlerTag => handlerTag > 0);\n}\n\nfunction hasUnresolvedRefs(props) {\n  const extract = refs => {\n    if (!Array.isArray(refs)) {\n      return refs && refs.current === null;\n    }\n    return refs.some(r => r && r.current === null);\n  };\n  return extract(props['simultaneousHandlers']) || extract(props['waitFor']);\n}\n\nconst stateToPropMappings = {\n  [State.BEGAN]: 'onBegan',\n  [State.FAILED]: 'onFailed',\n  [State.CANCELLED]: 'onCancelled',\n  [State.ACTIVE]: 'onActivated',\n  [State.END]: 'onEnded',\n};\n\nexport default function createHandler(\n  handlerName,\n  propTypes = {},\n  config = {},\n  transformProps,\n  customNativeProps = {}\n) {\n  class Handler extends React.Component {\n    static displayName = handlerName;\n\n    static propTypes = propTypes;\n\n    constructor(props) {\n      super(props);\n      this._handlerTag = handlerTag++;\n      this._config = {};\n      if (props.id) {\n        if (handlerIDToTag[props.id] !== undefined) {\n          throw new Error(`Handler with ID \"${props.id}\" already registered`);\n        }\n        handlerIDToTag[props.id] = this._handlerTag;\n      }\n    }\n\n    _onGestureHandlerEvent = event => {\n      if (event.nativeEvent.handlerTag === this._handlerTag) {\n        this.props.onGestureEvent && this.props.onGestureEvent(event);\n      } else {\n        this.props.onGestureHandlerEvent &&\n          this.props.onGestureHandlerEvent(event);\n      }\n    };\n\n    _onGestureHandlerStateChange = event => {\n      if (event.nativeEvent.handlerTag === this._handlerTag) {\n        this.props.onHandlerStateChange &&\n          this.props.onHandlerStateChange(event);\n\n        const stateEventName = stateToPropMappings[event.nativeEvent.state];\n        if (typeof this.props[stateEventName] === 'function') {\n          this.props[stateEventName](event);\n        }\n      } else {\n        this.props.onGestureHandlerStateChange &&\n          this.props.onGestureHandlerStateChange(event);\n      }\n    };\n\n    _refHandler = node => {\n      this._viewNode = node;\n\n      const child = React.Children.only(this.props.children);\n      const { ref } = child;\n      if (ref !== null) {\n        if (typeof ref === 'function') {\n          ref(node);\n        } else {\n          ref.current = node;\n        }\n      }\n    };\n\n    _createGestureHandler = newConfig => {\n      this._config = newConfig;\n\n      RNGestureHandlerModule.createGestureHandler(\n        handlerName,\n        this._handlerTag,\n        newConfig\n      );\n    };\n\n    _attachGestureHandler = newViewTag => {\n      this._viewTag = newViewTag;\n\n      RNGestureHandlerModule.attachGestureHandler(this._handlerTag, newViewTag);\n    };\n\n    _updateGestureHandler = newConfig => {\n      this._config = newConfig;\n\n      RNGestureHandlerModule.updateGestureHandler(this._handlerTag, newConfig);\n    };\n\n    componentWillUnmount() {\n      RNGestureHandlerModule.dropGestureHandler(this._handlerTag);\n      if (this._updateEnqueued) {\n        clearImmediate(this._updateEnqueued);\n      }\n      if (this.props.id) {\n        delete handlerIDToTag[this.props.id];\n      }\n    }\n\n    componentDidMount() {\n      if (hasUnresolvedRefs(this.props)) {\n        // If there are unresolved refs (e.g. \".current\" has not yet been set)\n        // passed as `simultaneousHandlers` or `waitFor`, we enqueue a call to\n        // _update method that will try to update native handler props using\n        // setImmediate. This makes it so _update function gets called after all\n        // react components are mounted and we expect the missing ref object to\n        // be resolved by then.\n        this._updateEnqueued = setImmediate(() => {\n          this._updateEnqueued = null;\n          this._update();\n        });\n      }\n\n      this._createGestureHandler(\n        filterConfig(\n          transformProps ? transformProps(this.props) : this.props,\n          { ...this.constructor.propTypes, ...customNativeProps },\n          config\n        )\n      );\n      this._attachGestureHandler(findNodeHandle(this._viewNode));\n    }\n\n    componentDidUpdate() {\n      const viewTag = findNodeHandle(this._viewNode);\n      if (this._viewTag !== viewTag) {\n        this._attachGestureHandler(viewTag);\n      }\n      this._update();\n    }\n\n    _update() {\n      const newConfig = filterConfig(\n        transformProps ? transformProps(this.props) : this.props,\n        { ...this.constructor.propTypes, ...customNativeProps },\n        config\n      );\n      if (!deepEqual(this._config, newConfig)) {\n        this._updateGestureHandler(newConfig);\n      }\n    }\n\n    setNativeProps(updates) {\n      const mergedProps = { ...this.props, ...updates };\n      const newConfig = filterConfig(\n        transformProps ? transformProps(mergedProps) : mergedProps,\n        { ...this.constructor.propTypes, ...customNativeProps },\n        config\n      );\n      this._updateGestureHandler(newConfig);\n    }\n\n    render() {\n      let gestureEventHandler = this._onGestureHandlerEvent;\n      const { onGestureEvent, onGestureHandlerEvent } = this.props;\n      if (onGestureEvent && typeof onGestureEvent !== 'function') {\n        // If it's not a method it should be an native Animated.event\n        // object. We set it directly as the handler for the view\n        // In this case nested handlers are not going to be supported\n        if (onGestureHandlerEvent) {\n          throw new Error(\n            'Nesting touch handlers with native animated driver is not supported yet'\n          );\n        }\n        gestureEventHandler = this.props.onGestureEvent;\n      } else {\n        if (\n          onGestureHandlerEvent &&\n          typeof onGestureHandlerEvent !== 'function'\n        ) {\n          throw new Error(\n            'Nesting touch handlers with native animated driver is not supported yet'\n          );\n        }\n      }\n\n      let gestureStateEventHandler = this._onGestureHandlerStateChange;\n      const { onHandlerStateChange, onGestureHandlerStateChange } = this.props;\n      if (onHandlerStateChange && typeof onHandlerStateChange !== 'function') {\n        // If it's not a method it should be an native Animated.event\n        // object. We set it directly as the handler for the view\n        // In this case nested handlers are not going to be supported\n        if (onGestureHandlerStateChange) {\n          throw new Error(\n            'Nesting touch handlers with native animated driver is not supported yet'\n          );\n        }\n        gestureStateEventHandler = this.props.onHandlerStateChange;\n      } else {\n        if (\n          onGestureHandlerStateChange &&\n          typeof onGestureHandlerStateChange !== 'function'\n        ) {\n          throw new Error(\n            'Nesting touch handlers with native animated driver is not supported yet'\n          );\n        }\n      }\n\n      const child = React.Children.only(this.props.children);\n      let grandChildren = child.props.children;\n      if (\n        Touchable.TOUCH_TARGET_DEBUG &&\n        child.type &&\n        (child.type === 'RNGestureHandlerButton' ||\n          child.type.name === 'View' ||\n          child.type.displayName === 'View')\n      ) {\n        grandChildren = React.Children.toArray(grandChildren);\n        grandChildren.push(\n          Touchable.renderDebugView({\n            color: 'mediumspringgreen',\n            hitSlop: child.props.hitSlop,\n          })\n        );\n      }\n      return React.cloneElement(\n        child,\n        {\n          ref: this._refHandler,\n          collapsable: false,\n          onGestureHandlerEvent: gestureEventHandler,\n          onGestureHandlerStateChange: gestureStateEventHandler,\n        },\n        grandChildren\n      );\n    }\n  }\n  return Handler;\n}\n"]},"metadata":{},"sourceType":"module"}