{"ast":null,"code":"var _jsxFileName=\"/Users/janic/Developer/react-native-safe-area-context/src/NativeSafeAreaView.web.tsx\";import*as React from'react';import View from\"react-native-web/dist/exports/View\";var CSSTransitions={WebkitTransition:'webkitTransitionEnd',Transition:'transitionEnd',MozTransition:'transitionend',MSTransition:'msTransitionEnd',OTransition:'oTransitionEnd'};export default function NativeSafeAreaView(_ref){var children=_ref.children,style=_ref.style,onInsetsChange=_ref.onInsetsChange;React.useEffect(function(){if(typeof document==='undefined'){return;}var element=createContextElement();document.body.appendChild(element);var onEnd=function onEnd(){var _window$getComputedSt=window.getComputedStyle(element),paddingTop=_window$getComputedSt.paddingTop,paddingBottom=_window$getComputedSt.paddingBottom,paddingLeft=_window$getComputedSt.paddingLeft,paddingRight=_window$getComputedSt.paddingRight;var insets={top:paddingTop?parseInt(paddingTop,10):0,bottom:paddingBottom?parseInt(paddingBottom,10):0,left:paddingLeft?parseInt(paddingLeft,10):0,right:paddingRight?parseInt(paddingRight,10):0};onInsetsChange({nativeEvent:{insets:insets}});};element.addEventListener(getSupportedTransitionEvent(),onEnd);onEnd();return function(){document.body.removeChild(element);element.removeEventListener(getSupportedTransitionEvent(),onEnd);};},[onInsetsChange]);return React.createElement(View,{style:style,__source:{fileName:_jsxFileName,lineNumber:58}},children);}var _supportedTransitionEvent=null;function getSupportedTransitionEvent(){if(_supportedTransitionEvent!==null){return _supportedTransitionEvent;}var element=document.createElement('invalidtype');_supportedTransitionEvent=CSSTransitions.Transition;for(var key in CSSTransitions){if(element.style[key]!==undefined){_supportedTransitionEvent=CSSTransitions[key];break;}}return _supportedTransitionEvent;}var _supportedEnv=null;function getSupportedEnv(){if(_supportedEnv!==null){return _supportedEnv;}var _window=window,CSS=_window.CSS;if(CSS&&CSS.supports&&CSS.supports('top: constant(safe-area-inset-top)')){_supportedEnv='constant';}else{_supportedEnv='env';}return _supportedEnv;}function getInset(side){return getSupportedEnv()+\"(safe-area-inset-\"+side+\")\";}function createContextElement(){var element=document.createElement('div');var style=element.style;style.position='fixed';style.left='0';style.top='0';style.width='0';style.height='0';style.zIndex='-1';style.overflow='hidden';style.visibility='hidden';style.transitionDuration='0.05s';style.transitionProperty='padding';style.transitionDelay='0s';style.paddingTop=getInset('top');style.paddingBottom=getInset('bottom');style.paddingLeft=getInset('left');style.paddingRight=getInset('right');return element;}","map":{"version":3,"sources":["NativeSafeAreaView.web.tsx"],"names":["CSSTransitions","WebkitTransition","Transition","MozTransition","MSTransition","OTransition","children","style","onInsetsChange","React","element","createContextElement","document","onEnd","paddingTop","paddingBottom","paddingLeft","paddingRight","window","insets","top","parseInt","bottom","left","right","nativeEvent","getSupportedTransitionEvent","_supportedTransitionEvent","_supportedEnv","CSS","getSupportedEnv","getInset"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { ViewStyle, View } from 'react-native';\n\nimport { InsetChangeNativeCallback } from './SafeArea.types';\n\ninterface NativeSafeAreaViewProps {\n  children?: React.ReactNode;\n  style: ViewStyle;\n  onInsetsChange: InsetChangeNativeCallback;\n}\n\nconst CSSTransitions: Record<string, string> = {\n  WebkitTransition: 'webkitTransitionEnd',\n  Transition: 'transitionEnd',\n  MozTransition: 'transitionend',\n  MSTransition: 'msTransitionEnd',\n  OTransition: 'oTransitionEnd',\n};\n\nexport default function NativeSafeAreaView({\n  children,\n  style,\n  onInsetsChange,\n}: NativeSafeAreaViewProps) {\n  React.useEffect(() => {\n    // Skip for SSR.\n    if (typeof document === 'undefined') {\n      return;\n    }\n\n    const element = createContextElement();\n    document.body.appendChild(element);\n    const onEnd = () => {\n      const {\n        paddingTop,\n        paddingBottom,\n        paddingLeft,\n        paddingRight,\n      } = window.getComputedStyle(element);\n\n      const insets = {\n        top: paddingTop ? parseInt(paddingTop, 10) : 0,\n        bottom: paddingBottom ? parseInt(paddingBottom, 10) : 0,\n        left: paddingLeft ? parseInt(paddingLeft, 10) : 0,\n        right: paddingRight ? parseInt(paddingRight, 10) : 0,\n      };\n      // @ts-ignore: missing properties\n      onInsetsChange({ nativeEvent: { insets } });\n    };\n    element.addEventListener(getSupportedTransitionEvent(), onEnd);\n    onEnd();\n    return () => {\n      document.body.removeChild(element);\n      element.removeEventListener(getSupportedTransitionEvent(), onEnd);\n    };\n  }, [onInsetsChange]);\n\n  return <View style={style}>{children}</View>;\n}\n\nlet _supportedTransitionEvent: string | null = null;\nfunction getSupportedTransitionEvent(): string {\n  if (_supportedTransitionEvent !== null) {\n    return _supportedTransitionEvent;\n  }\n  const element = document.createElement('invalidtype');\n\n  _supportedTransitionEvent = CSSTransitions.Transition;\n  for (const key in CSSTransitions) {\n    if (element.style[key as keyof CSSStyleDeclaration] !== undefined) {\n      _supportedTransitionEvent = CSSTransitions[key];\n      break;\n    }\n  }\n  return _supportedTransitionEvent;\n}\n\ntype CssEnv = 'constant' | 'env';\n\nlet _supportedEnv: CssEnv | null = null;\nfunction getSupportedEnv(): CssEnv {\n  if (_supportedEnv !== null) {\n    return _supportedEnv;\n  }\n  const { CSS } = window;\n  if (\n    CSS &&\n    CSS.supports &&\n    CSS.supports('top: constant(safe-area-inset-top)')\n  ) {\n    _supportedEnv = 'constant';\n  } else {\n    _supportedEnv = 'env';\n  }\n  return _supportedEnv;\n}\n\nfunction getInset(side: string): string {\n  return `${getSupportedEnv()}(safe-area-inset-${side})`;\n}\n\nfunction createContextElement(): HTMLElement {\n  const element = document.createElement('div');\n  const { style } = element;\n  style.position = 'fixed';\n  style.left = '0';\n  style.top = '0';\n  style.width = '0';\n  style.height = '0';\n  style.zIndex = '-1';\n  style.overflow = 'hidden';\n  style.visibility = 'hidden';\n  // Bacon: Anything faster than this and the callback will be invoked too early with the wrong insets\n  style.transitionDuration = '0.05s';\n  style.transitionProperty = 'padding';\n  style.transitionDelay = '0s';\n  style.paddingTop = getInset('top');\n  style.paddingBottom = getInset('bottom');\n  style.paddingLeft = getInset('left');\n  style.paddingRight = getInset('right');\n  return element;\n}\n"]},"metadata":{},"sourceType":"module"}