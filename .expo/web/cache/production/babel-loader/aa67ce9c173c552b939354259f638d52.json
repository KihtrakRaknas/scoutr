{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React,{Component}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import View from\"react-native-web/dist/exports/View\";import Button from\"react-native-web/dist/exports/Button\";import Alert from\"react-native-web/dist/exports/Alert\";import KeyboardAvoidingView from\"react-native-web/dist/exports/KeyboardAvoidingView\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import AsyncStorage from\"react-native-web/dist/exports/AsyncStorage\";import FlatList from\"react-native-web/dist/exports/FlatList\";import firebase from'firebase';import'firebase/firestore';import{SplashScreen}from'expo';import{ListItem}from'react-native-elements';var CompScreen=function(_React$Component){_inherits(CompScreen,_React$Component);function CompScreen(props){var _this;_classCallCheck(this,CompScreen);_this=_possibleConstructorReturn(this,_getPrototypeOf(CompScreen).call(this,props));_this.state={teams:[]};var name=_this.props.navigation.getParam('name','No Name');var sku=_this.props.navigation.getParam('sku','sku');AsyncStorage.getItem('team').then(function(team){_this.setState({team:team});fetch('https://api.vexdb.io/v1/get_teams?season=current&sku='+sku).then(function(response){return response.json();}).then(function(responseJson){console.log(responseJson);var teams=responseJson[\"result\"];console.log(teams);_this.setState({teams:teams});firebase.firestore().collection('teams').doc(team.replace(/\\D+/g,'')).collection('comp').doc(sku).collection('teams').get().then(function(snapshot){var _loop=function _loop(teamItemNa){var teamItem=teams[teamItemNa];snapshot.forEach(function(doc){console.log(doc.id,'=>',doc.data());if(doc.id==teamItem.number){console.log(\"AHHH\");teams[teamItemNa].haveData=true;}});};for(var teamItemNa in teams){_loop(teamItemNa);}_this.setState({teams:teams});}).catch(function(err){console.log('Error getting documents',err);});});});return _this;}_createClass(CompScreen,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var navigation=this.props.navigation;this.focusListener=navigation.addListener('didFocus',function(){var teams=_this2.state.teams;var team=_this2.state.team;var sku=_this2.props.navigation.getParam('sku','sku');firebase.firestore().collection('teams').doc(team.replace(/\\D+/g,'')).collection('comp').doc(sku).collection('teams').get().then(function(snapshot){var _loop2=function _loop2(teamItemNa){var teamItem=teams[teamItemNa];snapshot.forEach(function(doc){console.log(doc.id,'=>',doc.data());if(doc.id==teamItem.number){console.log(\"AHHH\");teams[teamItemNa].haveData=true;}});};for(var teamItemNa in teams){_loop2(teamItemNa);}_this2.setState({teams:teams});}).catch(function(err){console.log('Error getting documents',err);});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.focusListener.remove();}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(FlatList,{data:this.state.teams,renderItem:function renderItem(_ref){var item=_ref.item;return React.createElement(ListItem,{checkmark:item.haveData,onPress:function onPress(){return _this3.props.navigation.navigate('TeamInfo',{team:item.number,compName:_this3.props.navigation.getParam('compName'),sku:_this3.props.navigation.getParam('sku')});},bottomDivider:true,topDivider:true,subtitle:item.organisation+\" - \"+item.region,title:item.number});},keyExtractor:function keyExtractor(item){return item.id;},ListEmptyComponent:React.createElement(View,null,React.createElement(Text,null,\"No Competitions found for \",this.state.team))});}},{key:\"abbrState\",value:function abbrState(input,to){var states=[['Arizona','AZ'],['Alabama','AL'],['Alaska','AK'],['Arkansas','AR'],['California','CA'],['Colorado','CO'],['Connecticut','CT'],['Delaware','DE'],['Florida','FL'],['Georgia','GA'],['Hawaii','HI'],['Idaho','ID'],['Illinois','IL'],['Indiana','IN'],['Iowa','IA'],['Kansas','KS'],['Kentucky','KY'],['Louisiana','LA'],['Maine','ME'],['Maryland','MD'],['Massachusetts','MA'],['Michigan','MI'],['Minnesota','MN'],['Mississippi','MS'],['Missouri','MO'],['Montana','MT'],['Nebraska','NE'],['Nevada','NV'],['New Hampshire','NH'],['New Jersey','NJ'],['New Mexico','NM'],['New York','NY'],['North Carolina','NC'],['North Dakota','ND'],['Ohio','OH'],['Oklahoma','OK'],['Oregon','OR'],['Pennsylvania','PA'],['Rhode Island','RI'],['South Carolina','SC'],['South Dakota','SD'],['Tennessee','TN'],['Texas','TX'],['Utah','UT'],['Vermont','VT'],['Virginia','VA'],['Washington','WA'],['West Virginia','WV'],['Wisconsin','WI'],['Wyoming','WY']];if(to=='abbr'){input=input.replace(/\\w\\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase();});for(i=0;i<states.length;i++){if(states[i][0]==input){return states[i][1];}}}else if(to=='name'){input=input.toUpperCase();for(i=0;i<states.length;i++){if(states[i][1]==input){return states[i][0];}}}}}]);return CompScreen;}(React.Component);CompScreen.navigationOptions=function(_ref2){var navigation=_ref2.navigation;return{title:navigation.getParam('title','No Name').substring(0,25)+(\"\"+(navigation.getParam('title','No Name').substring(25).trim()!=\"\"?'...':''))};};export{CompScreen as default};var styles=StyleSheet.create({container:{flex:1,justifyContent:'center',alignItems:'center',backgroundColor:\"red\"},textInputBox:{borderBottomColor:\"white\",borderBottomWidth:1,marginBottom:40,width:\"90%\"},textInput:{alignSelf:'stretch',fontSize:24,height:40,fontWeight:'200',marginBottom:0,color:\"white\"},title:{fontSize:50,marginBottom:30,color:\"white\"},submitButton:{alignItems:'center',backgroundColor:\"blue\",width:\"90%\",padding:15,borderRadius:7,marginBottom:10}});","map":{"version":3,"sources":["C:/Users/karth/Documents/RoboticsScoutingTool/CompScreen.js"],"names":["React","Component","firebase","SplashScreen","ListItem","CompScreen","props","state","teams","name","navigation","getParam","sku","AsyncStorage","getItem","then","team","setState","fetch","response","json","responseJson","console","log","firestore","collection","doc","replace","get","snapshot","teamItemNa","teamItem","forEach","id","data","number","haveData","catch","err","focusListener","addListener","remove","item","navigate","compName","organisation","region","input","to","states","txt","charAt","toUpperCase","substr","toLowerCase","i","length","navigationOptions","title","substring","trim","styles","StyleSheet","create","container","flex","justifyContent","alignItems","backgroundColor","textInputBox","borderBottomColor","borderBottomWidth","marginBottom","width","textInput","alignSelf","fontSize","height","fontWeight","color","submitButton","padding","borderRadius"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { StyleSheet, Text, TextInput, View, Button, Alert, KeyboardAvoidingView, TouchableOpacity, AsyncStorage, FlatList} from 'react-native'\r\nimport firebase from 'firebase'\r\nimport 'firebase/firestore';\r\nimport { SplashScreen } from 'expo';\r\nimport { ListItem } from 'react-native-elements'\r\n\r\nexport default class CompScreen extends React.Component {\r\n\r\n      state = {\r\n        teams:[]\r\n      }\r\n    \r\n    constructor(props){\r\n      super(props)\r\n      let name = this.props.navigation.getParam('name', 'No Name')\r\n      let sku = this.props.navigation.getParam('sku','sku')\r\n        AsyncStorage.getItem('team').then((team)=>{\r\n            this.setState({team})\r\n            fetch('https://api.vexdb.io/v1/get_teams?season=current&sku='+sku)\r\n            .then((response) => response.json())\r\n            .then((responseJson)=>{\r\n                console.log(responseJson)\r\n                let teams = responseJson[\"result\"]\r\n                console.log(teams)\r\n                this.setState({teams})            \r\n                firebase.firestore().collection('teams').doc(team.replace(/\\D+/g, '')).collection('comp').doc(sku).collection('teams').get()\r\n                .then(snapshot => {\r\n                    for(let teamItemNa in teams){\r\n                        let teamItem = teams[teamItemNa]\r\n                        snapshot.forEach(doc => {\r\n                            console.log(doc.id, '=>', doc.data());\r\n                            if(doc.id == teamItem.number){\r\n                                console.log(\"AHHH\")\r\n                                teams[teamItemNa].haveData = true;\r\n                            }\r\n                        });\r\n                    }\r\n                    this.setState({teams}) \r\n                })\r\n                .catch(err => {\r\n                  console.log('Error getting documents', err);\r\n                });\r\n              })\r\n            })\r\n\r\n      \r\n    }\r\n\r\n    componentDidMount() {\r\n        const { navigation } = this.props;\r\n        this.focusListener = navigation.addListener('didFocus', () => {\r\n            let teams = this.state.teams\r\n            let team = this.state.team\r\n            let sku = this.props.navigation.getParam('sku','sku')\r\n            firebase.firestore().collection('teams').doc(team.replace(/\\D+/g, '')).collection('comp').doc(sku).collection('teams').get()\r\n                .then(snapshot => {\r\n                    for(let teamItemNa in teams){\r\n                        let teamItem = teams[teamItemNa]\r\n                        snapshot.forEach(doc => {\r\n                            console.log(doc.id, '=>', doc.data());\r\n                            if(doc.id == teamItem.number){\r\n                                console.log(\"AHHH\")\r\n                                teams[teamItemNa].haveData = true;\r\n                            }\r\n                        });\r\n                    }\r\n                    this.setState({teams}) \r\n                })\r\n                .catch(err => {\r\n                  console.log('Error getting documents', err);\r\n                });\r\n        });\r\n      }\r\n\r\n    componentWillUnmount() {\r\n        // Remove the event listener\r\n        this.focusListener.remove();\r\n      }\r\n\r\n    static navigationOptions = ({ navigation }) => {\r\n        return {\r\n          title: navigation.getParam('title', 'No Name').substring(0,25)+`${navigation.getParam('title', 'No Name').substring(25).trim()!=\"\"?'...':''}`,\r\n        };\r\n      };\r\n   \r\n    render() {\r\n      return (\r\n        <FlatList\r\n            data={this.state.teams}\r\n            renderItem={({ item }) => <ListItem checkmark={item.haveData} onPress={()=>this.props.navigation.navigate('TeamInfo',{team:item.number, compName: this.props.navigation.getParam('compName'),sku:this.props.navigation.getParam('sku')})}\r\n            bottomDivider topDivider subtitle={item.organisation+\" - \"+item.region} title={item.number} />}\r\n            keyExtractor={item => item.id}\r\n      ListEmptyComponent={<View><Text>No Competitions found for {this.state.team}</Text></View>}\r\n        />\r\n      )\r\n    }\r\n\r\n    abbrState(input, to){\r\n    \r\n        var states = [\r\n            ['Arizona', 'AZ'],\r\n            ['Alabama', 'AL'],\r\n            ['Alaska', 'AK'],\r\n            ['Arkansas', 'AR'],\r\n            ['California', 'CA'],\r\n            ['Colorado', 'CO'],\r\n            ['Connecticut', 'CT'],\r\n            ['Delaware', 'DE'],\r\n            ['Florida', 'FL'],\r\n            ['Georgia', 'GA'],\r\n            ['Hawaii', 'HI'],\r\n            ['Idaho', 'ID'],\r\n            ['Illinois', 'IL'],\r\n            ['Indiana', 'IN'],\r\n            ['Iowa', 'IA'],\r\n            ['Kansas', 'KS'],\r\n            ['Kentucky', 'KY'],\r\n            ['Louisiana', 'LA'],\r\n            ['Maine', 'ME'],\r\n            ['Maryland', 'MD'],\r\n            ['Massachusetts', 'MA'],\r\n            ['Michigan', 'MI'],\r\n            ['Minnesota', 'MN'],\r\n            ['Mississippi', 'MS'],\r\n            ['Missouri', 'MO'],\r\n            ['Montana', 'MT'],\r\n            ['Nebraska', 'NE'],\r\n            ['Nevada', 'NV'],\r\n            ['New Hampshire', 'NH'],\r\n            ['New Jersey', 'NJ'],\r\n            ['New Mexico', 'NM'],\r\n            ['New York', 'NY'],\r\n            ['North Carolina', 'NC'],\r\n            ['North Dakota', 'ND'],\r\n            ['Ohio', 'OH'],\r\n            ['Oklahoma', 'OK'],\r\n            ['Oregon', 'OR'],\r\n            ['Pennsylvania', 'PA'],\r\n            ['Rhode Island', 'RI'],\r\n            ['South Carolina', 'SC'],\r\n            ['South Dakota', 'SD'],\r\n            ['Tennessee', 'TN'],\r\n            ['Texas', 'TX'],\r\n            ['Utah', 'UT'],\r\n            ['Vermont', 'VT'],\r\n            ['Virginia', 'VA'],\r\n            ['Washington', 'WA'],\r\n            ['West Virginia', 'WV'],\r\n            ['Wisconsin', 'WI'],\r\n            ['Wyoming', 'WY'],\r\n        ];\r\n    \r\n        if (to == 'abbr'){\r\n            input = input.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\r\n            for(i = 0; i < states.length; i++){\r\n                if(states[i][0] == input){\r\n                    return(states[i][1]);\r\n                }\r\n            }    \r\n        } else if (to == 'name'){\r\n            input = input.toUpperCase();\r\n            for(i = 0; i < states.length; i++){\r\n                if(states[i][1] == input){\r\n                    return(states[i][0]);\r\n                }\r\n            }    \r\n        }\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor:\"red\",\r\n    \r\n  },\r\n  textInputBox: {\r\n    borderBottomColor:\"white\",\r\n    borderBottomWidth: 1,\r\n    marginBottom: 40,\r\n    width:\"90%\",\r\n  },\r\n  textInput: {\r\n    alignSelf: 'stretch',\r\n    fontSize: 24,\r\n    height: 40,\r\n    fontWeight: '200',\r\n    marginBottom: 0,\r\n    color:\"white\",\r\n    \r\n  },\r\n  title: {\r\n    fontSize:50,\r\n    marginBottom:30,\r\n    color:\"white\"\r\n  },\r\n  submitButton:{\r\n    alignItems: 'center',\r\n    backgroundColor:\"blue\",\r\n    width:\"90%\",\r\n    padding:15,\r\n    borderRadius:7,\r\n    marginBottom:10\r\n  },\r\n})"]},"metadata":{},"sourceType":"module"}